<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Double 12 Express</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
/* ===== CORE RESET ===== */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { width: 100%; height: 100%; overflow: hidden; font-family: system-ui; }

/* ===== BACKGROUND ===== */
.splash-bg {
  position: fixed;
  inset: 0;
  background: url("images/double12express_bg_master.png") center / cover no-repeat;
  z-index: -3;
}
.splash-vignette {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle, rgba(0,0,0,0) 35%, rgba(0,0,0,.65) 100%);
  z-index: -2;
}

/* ===== LAYOUT ===== */
.splash-container {
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  gap: 14px;
  padding-bottom: 8vh;
}

/* ===== BUTTONS ===== */
.btn {
  min-width: 280px;
  padding: 14px;
  font-weight: 900;
  border-radius: 14px;
  border: none;
  cursor: pointer;
}
.btn-primary {
  background: linear-gradient(#3adf6b, #1ea84a);
}
.btn-secondary {
  background: linear-gradient(#f3e1b1, #d2b06f);
}

/* ===== MODAL ===== */
.modal-backdrop {
  position: fixed;
  inset: 0;
  display: none;
  background: rgba(0,0,0,.65);
  align-items: center;
  justify-content: center;
  z-index: 100;
}
.modal-backdrop.is-open { display: flex; }

.modal {
  background: rgba(20,16,10,.94);
  color: white;
  width: min(720px, 95%);
  border-radius: 18px;
  padding: 16px;
}

.modal h2 { margin-bottom: 10px; }

.field {
  margin: 12px 0;
}
.field label {
  display: block;
  font-weight: 800;
  margin-bottom: 4px;
}
.field input, .field select {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: none;
  font-weight: 700;
}

/* ===== TOGGLE ===== */
.toggle {
  padding: 10px 14px;
  border-radius: 10px;
  font-weight: 900;
  cursor: pointer;
}
.toggle[data-on="true"] {
  background: rgba(58,223,107,.3);
}
.toggle[data-on="false"] {
  background: rgba(255,255,255,.15);
}
</style>
</head>

<body>

<div class="splash-bg"></div>
<div class="splash-vignette"></div>

<main class="splash-container">
  <button class="btn btn-primary" onclick="startGame()">PLAY</button>
  <button class="btn btn-secondary" onclick="openModal('optionsModal')">OPTIONS</button>
</main>

<!-- OPTIONS MODAL -->
<div id="optionsModal" class="modal-backdrop">
  <div class="modal">
    <h2>Game Options</h2>

    <div class="field">
      <label>Player Name</label>
      <input id="playerNameInput" placeholder="Player 1">
    </div>

    <div class="field">
      <label>AI Difficulty</label>
      <select id="aiDifficulty">
        <option value="easy">Easy</option>
        <option value="normal">Normal</option>
        <option value="hard">Hard</option>
      </select>
    </div>

    <div class="field">
      <label>Auto Play</label>
      <button class="toggle" id="autoPlayToggle" data-on="false">OFF</button>
    </div>

    <div class="field">
      <label>Domino Pack</label>
      <select id="dominoPack">
        <option value="classic">Classic Ivory</option>
        <option value="modern">Modern Black</option>
        <option value="wood">Wood Grain</option>
      </select>
      <small style="opacity:.7">Preview coming next step</small>
    </div>

    <div class="field">
      <label>Ruleset</label>
      <select id="ruleset">
        <option value="standard">Standard</option>
        <option value="relaxed">Relaxed Doubles</option>
        <option value="strict">Strict Doubles</option>
      </select>
    </div>

    <button class="btn btn-secondary" onclick="closeModal('optionsModal')">Close</button>
  </div>
</div>

<script>
/* ===== SETTINGS ===== */
const SETTINGS_KEY = "double12express.settings";

const DEFAULT_SETTINGS = {
  playerName: "Player 1",
  aiDifficulty: "normal",
  autoPlay: false,
  showLog: true,
  ruleset: "standard",
  dominoPack: "classic",
  aiNamePool: [
    "Puppet", "Trip", "Conductor Carl",
    "The Engineer", "Rail Boss",
    "Boxcar Bill", "Switchman Sam"
  ]
};

function loadSettings() {
  return JSON.parse(localStorage.getItem(SETTINGS_KEY)) || structuredClone(DEFAULT_SETTINGS);
}

function saveSettings(s) {
  localStorage.setItem(SETTINGS_KEY, JSON.stringify(s));
}

let settings = loadSettings();

/* ===== UI SYNC ===== */
const playerNameInput = document.getElementById("playerNameInput");
const aiDifficulty = document.getElementById("aiDifficulty");
const autoPlayToggle = document.getElementById("autoPlayToggle");
const dominoPack = document.getElementById("dominoPack");
const ruleset = document.getElementById("ruleset");

function syncUI() {
  playerNameInput.value = settings.playerName;
  aiDifficulty.value = settings.aiDifficulty;
  dominoPack.value = settings.dominoPack;
  ruleset.value = settings.ruleset;
  autoPlayToggle.dataset.on = settings.autoPlay;
  autoPlayToggle.textContent = settings.autoPlay ? "ON" : "OFF";
}
syncUI();

/* ===== EVENTS ===== */
playerNameInput.oninput = () => {
  settings.playerName = playerNameInput.value.trim() || "Player 1";
  saveSettings(settings);
};

aiDifficulty.onchange = () => {
  settings.aiDifficulty = aiDifficulty.value;
  saveSettings(settings);
};

dominoPack.onchange = () => {
  settings.dominoPack = dominoPack.value;
  saveSettings(settings);
};

ruleset.onchange = () => {
  settings.ruleset = ruleset.value;
  saveSettings(settings);
};

autoPlayToggle.onclick = () => {
  settings.autoPlay = !settings.autoPlay;
  autoPlayToggle.dataset.on = settings.autoPlay;
  autoPlayToggle.textContent = settings.autoPlay ? "ON" : "OFF";
  saveSettings(settings);
};

/* ===== NAV ===== */
function startGame() {
  saveSettings(settings);
  window.location.href = "game.html";
}

/* ===== MODAL ===== */
function openModal(id) {
  document.getElementById(id).classList.add("is-open");
}
function closeModal(id) {
  document.getElementById(id).classList.remove("is-open");
}
</script>
</body>
</html>
